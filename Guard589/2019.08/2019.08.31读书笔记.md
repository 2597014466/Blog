代码整洁之道  - 第13章 并发编程

### 1. 并发是一种解耦策略。它帮助我们把做什么（目的）和何时（时机）做分解。解耦目的与时机能明显地改进应用程序的吞吐量和结构。


    1. 并发总能改进性能：并发只在多个线程或处理器之间能分享大量等待时间的时候才能改进性能。

    2. 编写并发程序无需修改设计：并发算法的设计有可能与单线程系统的设计极不相同。目的与时机的解耦往往对系统结构产生巨大影响。

    3. 在采用容器的时候，理解并发问题并不重要：了解容器在做什么才能对付并发更新、死锁等问题。

### 2. 编写并发软件的中肯说法

    1. 并发会在性能和编写额外代码上增加一些开销。

    2. 正确的并发是复杂的，即便对于简单的问题也是如此。

    3. 并发缺陷并非总能重现，所以常被看做偶发事件而忽略，未被当做真的缺陷看待。

    4. 并发常常需要对设计策略的根本性修改。

### 3. 并发防御原则
    1. 单一权责原则。分离并发相关代码与其他代码。

    2. 限制数据作用域。谨记数据封装；严格限制对可能被共享的数据的访问。

    3. 使用数据复本。

    4. 线程应尽可能地独立。尝试将数据分解到可被独立线程（可能在不同处理器上）操作的独立子集。

### 4. 了解执行模型

    1、生产者-消费者模型。生产者和消费者之间的队列是一种限定资源。

    2、读者-作者模型。平衡读者线程和作者线程的需求，提供合理的吞吐量，避免线程饥饿。

    3、宴席哲学家。学习基础算法，理解其解决方案。

### 5.警惕同步方法之间的依赖
避免使用一个共享对象的多个方法。如果必须使用时有3种写对代码的手段：

    1、基于客户端的锁定

    2、基于服务端的锁定

    3、适配服务端

### 6. 保持同步区域微小
    尽可能减小同步区域
