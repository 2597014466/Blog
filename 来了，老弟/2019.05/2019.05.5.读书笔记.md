## 网络模块
###网络分层
网络分层从上到下分别是应用层、传输层、网络层、数据链路层和物理层。越靠下的层越接近硬件。    
**（1）物理层**    
负责比特流在节点间的传输，即负责物理传输。该层的协议即与链路有关，也与传输介质有关。其通俗来讲就是把计算机连接起来的物理手段。  
**（2）数据链路层**    
该层控制网络层与物理层之间的通信，其主要功能是如何在不可靠的物理线路上进行数据的可靠传递。  
**（3）网络层**  
该层决定如何将数据从发送方路由到接受方。  
**（4）传输层**  
该层为两台主机上的应用程序提供端到端的通信。相比之下，网络层的功能是建立主机到主机的通信。传输层有两个传输协议： TCP (传输控制协议)和 UDP (用户数据报协议)。  其中， TCP 是一个可靠的面向连接的协议，UDP 是不可靠的或者说无连接的协议。  
**（5）应用层**    
应用程序收到传输层的数据后，接下来就要进行解读。解读必须事先规定好格式，而应用层就是规定应用程序的数据格式的。它的主要协议有 HTTP、FTP、Telent、SMTP、POP3 等。  
### TCP的三次握手与四次挥手  
**Tcp 的传输流程：**  
打开连接 --> 写请求数据 -->  都相应数据 --> 关闭连接  
**Tcp的三次握手的过程**    
  
* 第一次握手：建立连接。客户端发送连接请求报文段，将 SYN 设置为1、Sequence Number(seq) 为 x;接下来客户端进入 SYN_SENT 状态，等待服务端的确认。  
* 第二次握手：服务端收到客户端的 SYN 报文段，对 SYN 报文段进行确认，设置 Acknowledgment Number(ACK)为 x+1(seq+1);同时自己还要发送 SYN 请求信息，将 SYN 设置为1、Seq 为y。服务端将上述所有信息放到 SYN+ACK 报文段中，一并发送给客户端，此时服务端进入 SYN_RCVD 状态。  
* 第三次握手：客户端收到服务端的 SYN+ACK 报文段；然后将 ACK 设置为 y+1 ,向服务端发送 ACK 报文端，这个报文段发送完毕后，客户端和服务端都进入 ESTABLISHED(TCP连接成功)状态，完成TCP 的三次握手。  
  
**TCP的四次挥手过程**  
当客户端和服务端数据发送完毕后，断开连接时就需要进行 TCP 的四次挥手。   
  
* 第一次挥手：客户端设置 seq 和 ACK，向服务端发送一个 FIN 报文段。此时，客户端进入 FIN_WAIT_1 状态，表示客户端没有数据要发送给服务端了。  
* 第二次挥手：服务端收到了客户端发送的 FIN 报文段，向客户端回了一个 ACK 报文段。  
* 第三次挥手：服务端向客户端发送 FIN 报文段，请求关闭连接，同时服务端进入 LAST_ACK 状态。  
* 第四次挥手：客户端收到服务端发送的 FIN 报文段，向服务端发送 ACK 报文段，然后客户端进入 TIME_WAIT 状态。服务端收到客户端的 ACK 报文段以后，就关闭链接了。此时，客户端等待 2MSL （最大报文段生存时间）后依然没有收到回复，则说明服务端已正常关闭，这样客户端也可以关闭连接了。



